// Grid
//------------------------------------------------------------------------------

// –î–æ–±–∞–≤–ª—è–µ–º/—É–±–∏—Ä–∞–µ–º –º–µ—Ç–∫—É
//------------------------------------------------------------------------------

(function($) {

	LIST_BOARD.on('mousedown click', '.js-marker-task:not(.grid__date--past):not(.grid__date--completed)', function(event) {
		var isThis = $(this);

		// –ü–æ–ª—É—á–∞–µ–º –¥–µ–ª–æ –∏ –¥–∞—Ç—É
		var task = isThis.parents('.task');
		var taskDate = isThis.attr('data-date');

		// –ï—Å–ª–∏ –º–µ—Ç–∫–∞ —Å—Ç–∞–≤–∏–ª–∞—Å—å –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥–µ–ª–∞
		if (task.hasClass('task--filled') && event.type === 'mousedown') {
			// –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –º–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–µ–ª–∞
			localStorage.setItem('mwTempNewTaskMarker', taskDate);

		// –ï—Å–ª–∏ –º–µ—Ç–∫–∞ —Å—Ç–∞–≤–∏–ª–∞—Å—å —É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–µ–ª–∞
		} else if (!task.hasClass('task--add') && event.type === 'click') {
			// –ü–æ–ª—É—á–∞–µ–º —Ö–µ—à —Å–ø–∏—Å–∫–∞ –∏ —Ö–µ—à –¥–µ–ª–∞
			var listId = isThis.parents('.list').attr('data-id');
			var taskId = task.attr('data-id');

			// –ü–∞—Ä—Å–∏–º –•—Ä–∞–Ω–∏–ª–∏—â–µ
			var mahoweekStorage = JSON.parse(localStorage.getItem('mwStorage'));

			// –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –¥–µ–ª–∞ –≤ –•—Ä–∞–Ω–∏–ª–∏—â–µ
			var taskElement = mahoweekStorage.tasks.filter(function(value) {
				return value.id == taskId;
			});

			// –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å –¥–µ–ª–∞ –≤ –•—Ä–∞–Ω–∏–ª–∏—â–µ
			var taskIndex = mahoweekStorage.tasks.indexOf(taskElement[0]);

			// –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤–∞ –º–∞—Ä–∫–µ—Ä–æ–≤ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ
			if (!mahoweekStorage.tasks[taskIndex].markers) {
				// –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –º–∞—Ä–∫–µ—Ä–æ–≤ –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º
				mahoweekStorage.tasks[taskIndex].markers = [{
					date: taskDate,
					label: 'bull'
				}];

				// –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É –≤ —Å–µ—Ç–∫—É –¥–∞—Ç
				isThis.addClass('grid__date--bull');

				// –ï—Å–ª–∏ –¥–µ–ª–æ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
				if (task.hasClass('task--completed')) {
					// –ü–æ–º–µ—á–∞–µ–º –¥–µ–ª–æ –∫–∞–∫ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ
					delete mahoweekStorage.tasks[taskIndex].completed;
					delete mahoweekStorage.tasks[taskIndex].completedTime;

					// –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ–ª–æ –≤ —Å–ø–∏—Å–∫–µ
					task.removeClass('task--completed');
				}

			// –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ
			} else {
				// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞ –ª–∏ —É–∂–µ –º–µ—Ç–∫–∞ –Ω–∞ —ç—Ç–æ —á–∏—Å–ª–æ
				var markerElement = mahoweekStorage.tasks[taskIndex].markers.filter(function(value) {
					return value.date == taskDate;
				});

				// –ï—Å–ª–∏ –º–µ—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞
				if (markerElement != '') {
					// –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å –º–µ—Ç–∫–∏
					var markerIndex = mahoweekStorage.tasks[taskIndex].markers.indexOf(markerElement[0]);

					// –£–¥–∞–ª—è–µ–º –º–µ—Ç–∫—É
					mahoweekStorage.tasks[taskIndex].markers.splice(markerIndex, 1);

					// –£–±–∏—Ä–∞–µ–º –º–µ—Ç–∫—É –∏–∑ —Å–µ—Ç–∫–∏ –¥–∞—Ç
					isThis.removeClass('grid__date--bull');

				// –ï—Å–ª–∏ –º–µ—Ç–∫–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞
				} else {
					// –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É
					mahoweekStorage.tasks[taskIndex].markers.push({
						date: taskDate,
						label: 'bull'
					});

					// –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É –≤ —Å–µ—Ç–∫—É –¥–∞—Ç
					isThis.addClass('grid__date--bull');

					// –ï—Å–ª–∏ –¥–µ–ª–æ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
					if (task.hasClass('task--completed')) {
						// –ü–æ–º–µ—á–∞–µ–º –¥–µ–ª–æ –∫–∞–∫ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ
						delete mahoweekStorage.tasks[taskIndex].completed;
						delete mahoweekStorage.tasks[taskIndex].completedTime;

						// –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ–ª–æ –≤ —Å–ø–∏—Å–∫–µ
						task.removeClass('task--completed');
					}
				}
			}

			// –û–±–Ω–æ–≤–ª—è–µ–º –•—Ä–∞–Ω–∏–ª–∏—â–µ
			updateStorage(mahoweekStorage);

			// –ò–∑–º–µ–Ω—è–µ–º —Å—Ç–∏–ª—å —Å—Ç–∞—Ç—É—Å–∞ –¥–µ–ª–∞
			changeStyleTaskStatus(task);

			// –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞
			makeProgress(listId);

			// –ú–µ–Ω—è–µ–º —Ñ–∞–≤–∏–∫–æ–Ω–∫—É
			changeFavicon();
		}
	});

}(jQuery));


// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ—Ç–∫—É –¥–∞—Ç
//------------------------------------------------------------------------------

function makeGrid(type, data) {
	// –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∏ –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏
	// –ø—Ä–∞–∑–¥–Ω–∏–∫–∞–º–∏ –∏ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–º–∏ –¥–Ω—è–º–∏ –†–§
	var holidays = {
		// "2019-01-01": {
		// 	icon: "üéÖ",
		// 	title: "–ù–æ–≤—ã–π –≥–æ–¥, –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
		// 	dayoff: true
		// },
		// "2019-01-02": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
		// 	dayoff: true
		// },
		// "2019-01-03": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
		// 	dayoff: true
		// },
		// "2019-01-04": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
		// 	dayoff: true
		// },
		// "2019-01-05": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ 2 –º–∞—è)",
		// 	dayoff: true
		// },
		// "2019-01-06": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ 3 –º–∞—è)",
		// 	dayoff: true
		// },
		// "2019-01-07": {
		// 	icon: "üëº",
		// 	title: "–†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ, –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
		// 	dayoff: true
		// },
		// "2019-01-08": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
		// 	dayoff: true
		// },
		// "2019-01-13": {
		// 	icon: "üéÑ",
		// 	title: "–°—Ç–∞—Ä—ã–π –ù–æ–≤—ã–π –≥–æ–¥"
		// },
		// "2019-01-25": {
		// 	icon: "üéì",
		// 	title: "–¢–∞—Ç—å—è–Ω–∏–Ω –¥–µ–Ω—å"
		// },
		"2019-02-02": {
			icon: "üêπ",
			title: "–î–µ–Ω—å —Å—É—Ä–∫–∞"
		},
		"2019-02-14": {
			icon: "‚ù§",
			title: "–î–µ–Ω—å –≤—Å–µ—Ö –≤–ª—é–±–ª—ë–Ω–Ω—ã—Ö"
		},
		"2019-02-22": {
			title: "–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å",
			dayoff: false
		},
		"2019-02-23": {
			icon: "üí™",
			title: "–î–µ–Ω—å –∑–∞—â–∏—Ç–Ω–∏–∫–∞ –û—Ç–µ—á–µ—Å—Ç–≤–∞, –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ 10 –º–∞—è)",
			dayoff: true
		},
		"2019-03-01": {
			icon: "üå∑",
			title: "–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å –≤–µ—Å–Ω—ã"
		},
		"2019-03-07": {
			title: "–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å",
			dayoff: false
		},
		"2019-03-08": {
			icon: "üë©",
			title: "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π –¥–µ–Ω—å, –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
			dayoff: true
		},
		"2019-03-10": {
			icon: "üåû",
			title: "–ú–∞—Å–ª–µ–Ω–∏—Ü–∞"
		},
		"2019-03-17": {
			icon: "üçÄ",
			title: "–î–µ–Ω—å —Å–≤—è—Ç–æ–≥–æ –ü–∞—Ç—Ä–∏–∫–∞"
		},
		// "2018-04-01": {
		// 	icon: "üòÑ",
		// 	title: "–î–µ–Ω—å —Å–º–µ—Ö–∞"
		// },
		// "2018-04-08": {
		// 	icon: "üêá",
		// 	title: "–ü–∞—Å—Ö–∞"
		// },
		// "2018-04-12": {
		// 	icon: "üöÄ",
		// 	title: "–î–µ–Ω—å –∫–æ—Å–º–æ–Ω–∞–≤—Ç–∏–∫–∏"
		// },
		// "2018-04-28": {
		// 	title: "–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ 30 –∞–ø—Ä–µ–ª—è)",
		// 	dayoff: false
		// },
		// "2018-04-30": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –∑–∞ —Å—á—ë—Ç 28-–≥–æ –∞–ø—Ä–µ–ª—è)",
		// 	dayoff: true
		// },
		// "2018-05-01": {
		// 	icon: "üå∑",
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏–∫ –í–µ—Å–Ω—ã –∏ –¢—Ä—É–¥–∞, –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
		// 	dayoff: true
		// },
		// "2018-05-02": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –∑–∞ —Å—á—ë—Ç 7-–≥–æ —è–Ω–≤–∞—Ä—è)",
		// 	dayoff: true
		// },
		// "2018-05-08": {
		// 	title: "–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å",
		// 	dayoff: false
		// },
		// "2018-05-09": {
		// 	icon: "üéÜ",
		// 	title: "–î–µ–Ω—å –ü–æ–±–µ–¥—ã, –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
		// 	dayoff: true
		// },
		// "2018-06-01": {
		// 	icon: "üë∂",
		// 	title: "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –¥–µ–Ω—å –∑–∞—â–∏—Ç—ã –¥–µ—Ç–µ–π",
		// },
		// "2018-06-09": {
		// 	title: "–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ 11 –∏—é–Ω—è)",
		// 	dayoff: false
		// },
		// "2018-06-11": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –∑–∞ —Å—á—ë—Ç 9-–≥–æ –∏—é–Ω—è)",
		// 	dayoff: true
		// },
		// "2018-06-12": {
		// 	icon: "üá∑üá∫",
		// 	title: "–î–µ–Ω—å –†–æ—Å—Å–∏–∏, –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å",
		// 	dayoff: true
		// },
		// "2018-09-01": {
		// 	icon: "üìö",
		// 	title: "–î–µ–Ω—å –ó–Ω–∞–Ω–∏–π"
		// },
		// "2018-09-03": {
		// 	icon: "",
		// 	title: "–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å"
		// },
		"2019-09-13": {
			icon: "üòà",
			title: "–ü—è—Ç–Ω–∏—Ü–∞ 13"
		},
		// "2018-10-31": {
		// 	icon: "üéÉ",
		// 	title: "–•—ç–ª–ª–æ—É–∏–Ω"
		// },
		// "2018-11-04": {
		// 	icon: "‚úä",
		// 	title: "–î–µ–Ω—å –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–∞, –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ 5 –Ω–æ—è–±—Ä—è)",
		// 	dayoff: true
		// },
		// "2018-11-05": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –∑–∞ —Å—á—ë—Ç 4-–≥–æ –Ω–æ—è–±—Ä—è)",
		// 	dayoff: true
		// },
		// "2018-11-25": {
		// 	icon: "üë©",
		// 	title: "–î–µ–Ω—å –º–∞—Ç–µ—Ä–∏"
		// },
		// "2018-12-01": {
		// 	icon: "",
		// 	title: "–í—Å–µ–º–∏—Ä–Ω—ã–π –¥–µ–Ω—å –±–æ—Ä—å–±—ã —Å–æ –°–ü–ò–î–æ–º"
		// },
		"2019-12-13": {
			icon: "üòà",
			title: "–ü—è—Ç–Ω–∏—Ü–∞ 13"
		},
		// "2018-12-29": {
		// 	title: "–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ 31 –¥–µ–∫–∞–±—Ä—è)",
		// 	dayoff: false
		// },
		// "2018-12-31": {
		// 	title: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π –∑–∞ —Å—á—ë—Ç 29-–≥–æ –¥–µ–∫–∞–±—Ä—è)",
		// 	dayoff: true
		// }
	}

	// –ü–æ–ª—É—á–∞–µ–º –º–µ—Ç–∫—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
	var date = new Date();

	// –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–º–µ—Ä –¥–Ω—è
	var dayNumber = date.getDay();

	// –ó–∞–¥–∞–µ–º –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—é –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä 7
	if (dayNumber == 0) {
		dayNumber = 7;
	}

	// –î–µ–ª–∞–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–µ–Ω—å –ø—Ä–æ—à–µ–¥—à–∏–π
	var past = 1;

	// –†–∞–±–æ—Ç–∞–µ–º —Å data
	if (data) {
		// –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —Å –º–µ—Ç–∫–∞–º–∏
		var markerList = {};

		// –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫–∏ –≤ –æ–±—ä–µ–∫—Ç
		for (var i = 0; i < data.length; i ++) {
			var key = data[i].date;
			markerList[key] = data[i].label + '|' + (data[i].completed ? 1 : 0);
		}
	}

	// –ù–∞—á–∏–Ω–∞–µ–º –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–Ω–∏
	var grid = '';

	// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å,
	// –ø—Ä–∏—á–µ–º —Å–¥–≤–∏–≥–∞–µ–º –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ –µ—Å–ª–∏ –Ω–µ–¥–µ–ª—è –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å
	for (var i = 1 - dayNumber; i <= 14 - dayNumber; i ++) {
		// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
		var dateClass = '';
		var newDate = new Date();
		var time = newDate.setDate(date.getDate() + i);
		var day = newDate.getDate(time);
		var newDayNumber = newDate.getDay();
		var dataDate = makeDate(time, 'grid');

		// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å
		if (date.getDate() == day) {
			dateClass += ' grid__date--today';

			// –ú–µ–Ω—è–µ–º –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –¥–Ω–∏ –Ω–∞ –Ω–µ–ø—Ä–æ—à–µ–¥—à–∏–µ
			past = 0;
		}

		// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–æ—à–µ–¥—à–∏–µ –¥–Ω–∏
		if (past) {
			dateClass += ' grid__date--past';
		}

		// –ï—Å–ª–∏ —ç—Ç–æ —à–∞–ø–∫–∞ —Å–ø–∏—Å–∫–∞
		if (type == 'list') {
			if (dataDate in holidays) {
				// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—ã—Ö–æ–¥–Ω–æ–π –ª–∏ –∏–ª–∏ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å
				if (holidays[dataDate].dayoff || ((newDayNumber === 6 || newDayNumber === 0) && holidays[dataDate].dayoff !== false)) {
					dateClass += ' grid__date--holiday';
				} else {
					dateClass += '';
				}

				// –í—ã–≤–æ–¥–∏–º –¥–µ–Ω—å
				grid += '<div class="grid__date' + dateClass + '" title="' + holidays[dataDate].title + '">' + (holidays[dataDate].icon !== undefined ? holidays[dataDate].icon : day) + '</div>';
			} else {
				// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—ã—Ö–æ–¥–Ω–æ–π –ª–∏ –¥–µ–Ω—å
				if (newDayNumber == 6 || newDayNumber == 0) {
					dateClass += ' grid__date--holiday';
				}

				// –í—ã–≤–æ–¥–∏–º –¥–µ–Ω—å
				grid += '<div class="grid__date' + dateClass + '">' + day + '</div>';
			}

		// –ï—Å–ª–∏ —ç—Ç–æ –¥–µ–ª–æ
		} else if (type == 'task') {
			// –ï—Å–ª–∏ —É –¥–µ–ª–∞ –µ—Å—Ç—å –º–µ—Ç–∫–∏
			if (markerList) {
				// –°–º–æ—Ç—Ä–∏–º –µ—Å—Ç—å –ª–∏ –º–µ—Ç–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –¥–µ–Ω—å
				if (dataDate in markerList) {
					// –°–º–æ—Ç—Ä–∏–º –µ—Å—Ç—å –ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –º–µ—Ç–∫–∞
					if (markerList[dataDate].split('|')[0] == 'bull') {
						dateClass += ' grid__date--bull';
					}

					// –°–º–æ—Ç—Ä–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –ª–∏ –¥–µ–ª–æ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å
					if (markerList[dataDate].split('|')[1] == 1) {
						dateClass += ' grid__date--completed';
					}
				}
			}

			if (past) {
				// –í—ã–≤–æ–¥–∏–º –ø—Ä–æ—à–µ–¥—à–∏–π –¥–µ–Ω—å
				grid += '<div class="grid__date' + dateClass + '"></div>';
			} else {
				// –í—ã–≤–æ–¥–∏–º –¥–µ–Ω—å –Ω–∞—Å—Ç–æ—è—â–∏–π –∏–ª–∏ –±—É–¥—É—â–∏–π
				grid += '<button type="button" class="grid__date  js-marker-task' + dateClass + '" data-date="' + dataDate +'" aria-label="–î–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —Å–Ω—è—Ç—å –º–µ—Ç–∫—É" ></button>';
			}
		}
	}

	// –í—ã–≤–æ–¥–∏–º –¥–Ω–∏
	return grid;
}
